<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-usage/usage-guide" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.6.3"><title data-rh=true>Usage Guide | Redux Toolkit</title><meta data-rh=true name=viewport content="width=device-width,initial-scale=1.0"><meta data-rh=true property=og:image content=https://redux-toolkit.js.org/img/redux-logo-landscape.png><meta data-rh=true name=twitter:image content=https://redux-toolkit.js.org/img/redux-logo-landscape.png><meta data-rh=true property=og:url content=https://redux-toolkit.js.org/usage/usage-guide><meta data-rh=true property=og:locale content=en><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=twitter:card content=summary><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="Usage Guide | Redux Toolkit"><meta data-rh=true name=description content=&amp;nbsp;><meta data-rh=true property=og:description content=&amp;nbsp;><link data-rh=true rel=icon href=/img/favicon/favicon.ico><link data-rh=true rel=canonical href=https://redux-toolkit.js.org/usage/usage-guide><link data-rh=true rel=alternate href=https://redux-toolkit.js.org/usage/usage-guide hreflang=en><link data-rh=true rel=alternate href=https://redux-toolkit.js.org/usage/usage-guide hreflang=x-default><link rel=preconnect href=https://redux-docs-umami.up.railway.app><script async defer src=https://redux-docs-umami.up.railway.app/script.js data-website-id=616c102e-05dd-4a74-b63e-01bb52f1bc6c data-auto-track=true data-do-not-track=true data-cache=true data-exclude-search=false data-exclude-hash=false></script><link rel=stylesheet href=/assets/css/styles.d1974aab.css><script src=/assets/js/runtime~main.1ae001f1.js defer></script><script src=/assets/js/main.848e456e.js defer></script><body class=navigation-with-keyboard><script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":(window.matchMedia("(prefers-color-scheme: light)").matches,"light"),document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><link rel=preload as=image href=/img/redux.svg><link rel=preload as=image href=/img/redux_white.svg><div role=region aria-label="Skip to main content"><a class=skipToContent_oPtH href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="navbar navbar--fixed-top"><div class=navbar__inner><div class=navbar__items><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><div class=navbar__logo><img src=/img/redux.svg alt="Redux Logo" class="themedComponent_siVc themedComponent--light_hHel"><img src=/img/redux.svg alt="Redux Logo" class="themedComponent_siVc themedComponent--dark_yETr"></div><b class="navbar__title text--truncate">Redux Toolkit</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href=/introduction/getting-started>Getting Started</a><a class="navbar__item navbar__link" href=/tutorials/overview>Tutorials</a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/usage/usage-guide>Usage Guide</a><a class="navbar__item navbar__link" href=/api/configureStore>API</a><a class="navbar__item navbar__link" href=/rtk-query/overview>RTK Query</a><a href=https://github.com/reduxjs/redux-toolkit target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPrP><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><div class="toggle_ki11 colorModeToggle_Hewu"><button class="clean-btn toggleButton_MMFG toggleButtonDisabled_Uw7m" type=button disabled title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live=polite aria-pressed=false><svg viewBox="0 0 24 24" width=24 height=24 class=lightToggleIcon_lgto><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 class=darkToggleIcon_U96C><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg></button></div><div class=navbarSearchContainer_bzqh></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_MB5r"><div class=docsWrapper__sE8><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_iEvu" type=button></button><div class=docRoot_DfVB><aside class="theme-doc-sidebar-container docSidebarContainer_c7NB"><div class=sidebarViewport_KYo0><div class=sidebar_CUen><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_jmj1"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true href=/introduction/getting-started>Introduction</a></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/introduction/getting-started>Getting Started</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/introduction/why-rtk-is-redux-today>Why Redux Toolkit is How To Use Redux Today</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true href=/tutorials/overview>Tutorials</a></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/tutorials/overview>Tutorials Overview</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/tutorials/quick-start>Quick Start</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/tutorials/typescript>TypeScript Quick Start</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/tutorials/rtk-query>RTK Query Quick Start</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true href=/usage/migrating-to-modern-redux>Using Redux Toolkit</a></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/usage/migrating-to-modern-redux>Migrations</a></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/usage/usage-guide>Usage Guide</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/usage/usage-with-typescript>Usage With TypeScript</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/usage/immer-reducers>Writing Reducers with Immer</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/usage/nextjs>Setup with Next.js</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/api/configureStore>API Reference</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true href=/rtk-query/overview>RTK Query</a></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/overview>RTK Query Overview</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/comparison>Comparison with Other Tools</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/examples>Examples</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage-with-typescript>Usage With TypeScript</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/rtk-query/usage/queries>Using RTK Query</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/rtk-query/api/createApi>API Reference</a></div></ul></ul></nav></div></div></aside><main class=docMainContainer_a9sJ><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_Qr34"><div class=docItemContainer_tjFy><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_T5ub" aria-label=Breadcrumbs><ul class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_sfvy><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><span class=breadcrumbs__link>Using Redux Toolkit</span><meta itemprop=position content=1><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link itemprop=name>Usage Guide</span><meta itemprop=position content=2></ul></nav><div class="tocCollapsible_wXna theme-doc-toc-mobile tocMobile_Ojys"><button type=button class="clean-btn tocCollapsibleButton_iI2p">On this page</button></div><div class="theme-doc-markdown markdown"><p> </p>
<header><h1>Usage Guide</h1></header>
<p>The Redux core library is deliberately unopinionated. It lets you decide how you want to handle everything, like store setup, what your state contains, and how you want to build your reducers.</p>
<p>This is good in some cases, because it gives you flexibility, but that flexibility isn't always needed. Sometimes we just want the simplest possible way to get started, with some good default behavior out of the box. Or, maybe you're writing a larger application and finding yourself writing some similar code, and you'd like to cut down on how much of that code you have to write by hand.</p>
<p>As described in the <a href=/introduction/getting-started>Quick Start</a> page, the goal of Redux Toolkit is to help simplify common Redux use cases. It is not intended to be a complete solution for everything you might want to do with Redux, but it should make a lot of the Redux-related code you need to write a lot simpler (or in some cases, eliminate some of the hand-written code entirely).</p>
<p>Redux Toolkit exports several individual functions that you can use in your application, and adds dependencies on some other packages that are commonly used with Redux (like Reselect and Redux-Thunk). This lets you decide how to use these in your own application, whether it be a brand new project or updating a large existing app.</p>
<p>Let's look at some of the ways that Redux Toolkit can help make your Redux-related code better.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=store-setup>Store Setup<a href=#store-setup class=hash-link aria-label="Direct link to Store Setup" title="Direct link to Store Setup">​</a></h2>
<p>Every Redux app needs to configure and create a Redux store. This usually involves several steps:</p>
<ul>
<li>Importing or creating the root reducer function</li>
<li>Setting up middleware, likely including at least one middleware to handle asynchronous logic</li>
<li>Configuring the <a href=https://github.com/reduxjs/redux-devtools target=_blank rel="noopener noreferrer">Redux DevTools Extension</a></li>
<li>Possibly altering some of the logic based on whether the application is being built for development or production</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=manual-store-setup>Manual Store Setup<a href=#manual-store-setup class=hash-link aria-label="Direct link to Manual Store Setup" title="Direct link to Manual Store Setup">​</a></h3>
<p>The following example from the <a href=https://redux.js.org/recipes/configuring-your-store target=_blank rel="noopener noreferrer">Configuring Your Store</a> page in the Redux docs shows a typical store setup process:</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> applyMiddleware</span><span class="token imports punctuation" style=color:#F8F8F2>,</span><span class="token imports"> createStore </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'redux'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> composeWithDevTools </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'redux-devtools-extension'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports">thunkMiddleware</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'redux-thunk'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports">monitorReducersEnhancer</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./enhancers/monitorReducers'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports">loggerMiddleware</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./middleware/logger'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports">rootReducer</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./reducers'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>default</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>function</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>configureStore</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">preloadedState</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> middlewares </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token plain">loggerMiddleware</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> thunkMiddleware</span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> middlewareEnhancer </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>applyMiddleware</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token spread operator" style=color:#F8F8F2>...</span><span class="token plain">middlewares</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> enhancers </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token plain">middlewareEnhancer</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> monitorReducersEnhancer</span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> composedEnhancers </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>composeWithDevTools</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token spread operator" style=color:#F8F8F2>...</span><span class="token plain">enhancers</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> store </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createStore</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">rootReducer</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> preloadedState</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> composedEnhancers</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword control-flow" style=color:#F92672>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">process</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">env</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token constant" style=color:#F92672>NODE_ENV</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>!==</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'production'</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>&&</span><span class="token plain"> module</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">hot</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    module</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">hot</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>accept</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token string" style=color:#a6e22e>'./reducers'</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> store</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>replaceReducer</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">rootReducer</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword control-flow" style=color:#F92672>return</span><span class="token plain"> store</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>This example is readable, but the process isn't always straightforward:</p>
<ul>
<li>The basic Redux <code>createStore</code> function takes positional arguments: <code>(rootReducer, preloadedState, enhancer)</code>. Sometimes it's easy to forget which parameter is which.</li>
<li>The process of setting up middleware and enhancers can be confusing, especially if you're trying to add several pieces of configuration.</li>
<li>The Redux DevTools Extension docs initially suggest using <a href=https://github.com/zalmoxisus/redux-devtools-extension#11-basic-store target=_blank rel="noopener noreferrer">some hand-written code that checks the global namespace to see if the extension is available</a>. Many users copy and paste those snippets, which make the setup code harder to read.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=simplifying-store-setup-with-configurestore>Simplifying Store Setup with <code>configureStore</code><a href=#simplifying-store-setup-with-configurestore class=hash-link aria-label="Direct link to simplifying-store-setup-with-configurestore" title="Direct link to simplifying-store-setup-with-configurestore">​</a></h3>
<p><code>configureStore</code> helps with those issues by:</p>
<ul>
<li>Having an options object with "named" parameters, which can be easier to read</li>
<li>Letting you provide arrays of middleware and enhancers you want to add to the store, and calling <code>applyMiddleware</code> and <code>compose</code> for you automatically</li>
<li>Enabling the Redux DevTools Extension automatically</li>
</ul>
<p>In addition, <code>configureStore</code> adds some middleware by default, each with a specific goal:</p>
<ul>
<li><a href=https://github.com/reduxjs/redux-thunk target=_blank rel="noopener noreferrer"><code>redux-thunk</code></a> is the most commonly used middleware for working with both synchronous and async logic outside of components</li>
<li>In development, middleware that check for common mistakes like mutating the state or using non-serializable values.</li>
</ul>
<p>This means the store setup code itself is a bit shorter and easier to read, and also that you get good default behavior out of the box.</p>
<p>The simplest way to use it is to just pass the root reducer function as a parameter named <code>reducer</code>:</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> configureStore </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'@reduxjs/toolkit'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports">rootReducer</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./reducers'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> store </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>configureStore</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>reducer</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> rootReducer</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>default</span><span class="token plain"> store</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>You can also pass an object full of <a href=https://redux.js.org/recipes/structuring-reducers/splitting-reducer-logic target=_blank rel="noopener noreferrer">"slice reducers"</a>, and <code>configureStore</code> will call <a href=https://redux.js.org/api/combinereducers target=_blank rel="noopener noreferrer"><code>combineReducers</code></a> for you:</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> configureStore </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'@reduxjs/toolkit'</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports">usersReducer</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./usersReducer'</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports">postsReducer</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./postsReducer'</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> store </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>configureStore</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>reducer</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">    </span><span class="token literal-property property" style=color:#F92672>users</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> usersReducer</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">    </span><span class="token literal-property property" style=color:#F92672>posts</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> postsReducer</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>default</span><span class="token plain"> store</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>Note that this only works for one level of reducers. If you want to nest reducers, you'll need to call <code>combineReducers</code> yourself to handle the nesting.</p>
<p>If you need to customize the store setup, you can pass additional options. Here's what the hot reloading example might look like using Redux Toolkit:</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> configureStore </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'@reduxjs/toolkit'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports">monitorReducersEnhancer</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./enhancers/monitorReducers'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports">loggerMiddleware</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./middleware/logger'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports">rootReducer</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./reducers'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>default</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>function</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>configureAppStore</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">preloadedState</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> store </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>configureStore</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token literal-property property" style=color:#F92672>reducer</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> rootReducer</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token function-variable function" style=color:#E6D874>middleware</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">getDefaultMiddleware</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token function" style=color:#E6D874>getDefaultMiddleware</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>concat</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">loggerMiddleware</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    preloadedState</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token function-variable function" style=color:#E6D874>enhancers</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">getDefaultEnhancers</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token function" style=color:#E6D874>getDefaultEnhancers</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>concat</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">monitorReducersEnhancer</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword control-flow" style=color:#F92672>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">process</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">env</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token constant" style=color:#F92672>NODE_ENV</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>!==</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'production'</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>&&</span><span class="token plain"> module</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">hot</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    module</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">hot</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>accept</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token string" style=color:#a6e22e>'./reducers'</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> store</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>replaceReducer</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">rootReducer</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword control-flow" style=color:#F92672>return</span><span class="token plain"> store</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>If you provide the <code>middleware</code> argument, <code>configureStore</code> will only use whatever middleware you've listed.
If you want to have some custom middleware <em>and</em> the defaults all together, you can use the callback notation,
call <a href=/api/getDefaultMiddleware><code>getDefaultMiddleware</code></a> and include the results in the <code>middleware</code> array you return.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=writing-reducers>Writing Reducers<a href=#writing-reducers class=hash-link aria-label="Direct link to Writing Reducers" title="Direct link to Writing Reducers">​</a></h2>
<p><a href=https://redux.js.org/basics/reducers target=_blank rel="noopener noreferrer">Reducers</a> are the most important Redux concept. A typical reducer function needs to:</p>
<ul>
<li>Look at the <code>type</code> field of the action object to see how it should respond</li>
<li>Update its state immutably, by making copies of the parts of the state that need to change and only modifying those copies</li>
</ul>
<p>While you can <a href=https://blog.isquaredsoftware.com/2017/05/idiomatic-redux-tao-of-redux-part-2/#switch-statements target=_blank rel="noopener noreferrer">use any conditional logic you want</a> in a reducer, the most common approach is a <code>switch</code> statement, because it's a straightforward way to handle multiple possible values for a single field. However, many people don't like switch statements. The Redux docs show an example of <a href=https://redux.js.org/recipes/reducing-boilerplate#generating-reducers target=_blank rel="noopener noreferrer">writing a function that acts as a lookup table based on action types</a>, but leave it up to users to customize that function themselves.</p>
<p>The other common pain points around writing reducers have to do with updating state immutably. JavaScript is a mutable language, <a href=https://redux.js.org/recipes/structuring-reducers/immutable-update-patterns target=_blank rel="noopener noreferrer">updating nested immutable data by hand is hard</a>, and it's easy to make mistakes.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=simplifying-reducers-with-createreducer>Simplifying Reducers with <code>createReducer</code><a href=#simplifying-reducers-with-createreducer class=hash-link aria-label="Direct link to simplifying-reducers-with-createreducer" title="Direct link to simplifying-reducers-with-createreducer">​</a></h3>
<p>Since the "lookup table" approach is popular, Redux Toolkit includes a <code>createReducer</code> function similar to the one shown in the Redux docs. However, our <code>createReducer</code> utility has some special "magic" that makes it even better. It uses the <a href=https://github.com/mweststrate/immer target=_blank rel="noopener noreferrer">Immer</a> library internally, which lets you write code that "mutates" some data, but actually applies the updates immutably. This makes it effectively impossible to accidentally mutate state in a reducer.</p>
<p>In general, any Redux reducer that uses a <code>switch</code> statement can be converted to use <code>createReducer</code> directly. Each <code>case</code> in the switch becomes a key in the object passed to <code>createReducer</code>. Immutable update logic, like spreading objects or copying arrays, can probably be converted to direct "mutation". It's also fine to keep the immutable updates as-is and return the updated copies, too.</p>
<p>Here's some examples of how you can use <code>createReducer</code>. We'll start with a typical "todo list" reducer that uses switch statements and immutable updates:</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#F92672>function</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>todosReducer</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">state </span><span class="token parameter operator" style=color:#F8F8F2>=</span><span class="token parameter"> </span><span class="token parameter punctuation" style=color:#F8F8F2>[</span><span class="token parameter punctuation" style=color:#F8F8F2>]</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> action</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword control-flow" style=color:#F92672>switch</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">action</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">type</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token keyword" style=color:#F92672>case</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'ADD_TODO'</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword control-flow" style=color:#F92672>return</span><span class="token plain"> state</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>concat</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">action</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">payload</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token keyword" style=color:#F92672>case</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'TOGGLE_TODO'</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> index </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> action</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">payload</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword control-flow" style=color:#F92672>return</span><span class="token plain"> state</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>map</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">todo</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> i</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token keyword control-flow" style=color:#F92672>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">i </span><span class="token operator" style=color:#F8F8F2>!==</span><span class="token plain"> index</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token keyword control-flow" style=color:#F92672>return</span><span class="token plain"> todo</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token keyword control-flow" style=color:#F92672>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token spread operator" style=color:#F8F8F2>...</span><span class="token plain">todo</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token literal-property property" style=color:#F92672>completed</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>!</span><span class="token plain">todo</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">completed</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token keyword" style=color:#F92672>case</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'REMOVE_TODO'</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword control-flow" style=color:#F92672>return</span><span class="token plain"> state</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>filter</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">todo</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> i</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> i </span><span class="token operator" style=color:#F8F8F2>!==</span><span class="token plain"> action</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">payload</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">index</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token keyword module" style=color:#F92672>default</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword control-flow" style=color:#F92672>return</span><span class="token plain"> state</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>Notice that we specifically call <code>state.concat()</code> to return a copied array with the new todo entry, <code>state.map()</code> to return a copied array for the toggle case, and use the object spread operator to make a copy of the todo that needs to be updated.</p>
<p>With <code>createReducer</code>, we can shorten that example considerably:</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> todosReducer </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createReducer</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">builder</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  builder</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>addCase</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token string" style=color:#a6e22e>'ADD_TODO'</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">state</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> action</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token comment" style=color:#778090>// "mutate" the array by calling push()</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      state</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>push</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">action</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">payload</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>addCase</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token string" style=color:#a6e22e>'TOGGLE_TODO'</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">state</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> action</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> todo </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> state</span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token plain">action</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">payload</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">index</span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token comment" style=color:#778090>// "mutate" the object by overwriting a field</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      todo</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">completed</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>!</span><span class="token plain">todo</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">completed</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>addCase</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token string" style=color:#a6e22e>'REMOVE_TODO'</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">state</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> action</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token comment" style=color:#778090>// Can still return an immutably-updated value if we want to</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword control-flow" style=color:#F92672>return</span><span class="token plain"> state</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>filter</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">todo</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> i</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> i </span><span class="token operator" style=color:#F8F8F2>!==</span><span class="token plain"> action</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">payload</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">index</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>The ability to "mutate" the state is especially helpful when trying to update deeply nested state. This complex and painful code:</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#F92672>case</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"UPDATE_VALUE"</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword control-flow" style=color:#F92672>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token spread operator" style=color:#F8F8F2>...</span><span class="token plain">state</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token literal-property property" style=color:#F92672>first</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token spread operator" style=color:#F8F8F2>...</span><span class="token plain">state</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">first</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token literal-property property" style=color:#F92672>second</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token spread operator" style=color:#F8F8F2>...</span><span class="token plain">state</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">first</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">second</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token plain">action</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">someId</span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token spread operator" style=color:#F8F8F2>...</span><span class="token plain">state</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">first</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">second</span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token plain">action</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">someId</span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token literal-property property" style=color:#F92672>fourth</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> action</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">someValue</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>Can be simplified down to just:</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token function" style=color:#E6D874>updateValue</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">state</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> action</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain">someId</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> someValue</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> action</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">payload</span><span class="token punctuation" style=color:#F8F8F2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    state</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">first</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">second</span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token plain">someId</span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">fourth</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> someValue</span><span class="token punctuation" style=color:#F8F8F2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>Much better!</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=considerations-for-using-createreducer>Considerations for Using <code>createReducer</code><a href=#considerations-for-using-createreducer class=hash-link aria-label="Direct link to considerations-for-using-createreducer" title="Direct link to considerations-for-using-createreducer">​</a></h3>
<p>While the Redux Toolkit <code>createReducer</code> function can be really helpful, keep in mind that:</p>
<ul>
<li>The "mutative" code only works correctly inside of our <code>createReducer</code> function</li>
<li>Immer won't let you mix "mutating" the draft state and also returning a new state value</li>
</ul>
<p>See the <a href=/api/createReducer><code>createReducer</code> API reference</a> for more details.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=writing-action-creators>Writing Action Creators<a href=#writing-action-creators class=hash-link aria-label="Direct link to Writing Action Creators" title="Direct link to Writing Action Creators">​</a></h2>
<p>Redux encourages you to <a href=https://blog.isquaredsoftware.com/2016/10/idiomatic-redux-why-use-action-creators/ target=_blank rel="noopener noreferrer">write "action creator" functions</a> that encapsulate the process of creating an action object. While this is not strictly required, it's a standard part of Redux usage.</p>
<p>Most action creators are very simple. They take some parameters, and return an action object with a specific <code>type</code> field and the parameters inside the action. These parameters are typically put in a field called <code>payload</code>, which is part of the <a href=https://github.com/redux-utilities/flux-standard-action target=_blank rel="noopener noreferrer">Flux Standard Action</a> convention for organizing the contents of action objects. A typical action creator might look like:</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#F92672>function</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>addTodo</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">text</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword control-flow" style=color:#F92672>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token literal-property property" style=color:#F92672>type</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'ADD_TODO'</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token literal-property property" style=color:#F92672>payload</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> text </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=defining-action-creators-with-createaction>Defining Action Creators with <code>createAction</code><a href=#defining-action-creators-with-createaction class=hash-link aria-label="Direct link to defining-action-creators-with-createaction" title="Direct link to defining-action-creators-with-createaction">​</a></h3>
<p>Writing action creators by hand can get tedious. Redux Toolkit provides a function called <code>createAction</code>, which simply generates an action creator that uses the given action type, and turns its argument into the <code>payload</code> field:</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> addTodo </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createAction</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token string" style=color:#a6e22e>'ADD_TODO'</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token function" style=color:#E6D874>addTodo</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> </span><span class="token literal-property property" style=color:#F92672>text</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'Buy milk'</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#778090>// {type : "ADD_TODO", payload : {text : "Buy milk"}})</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><code>createAction</code> also accepts a "prepare callback" argument, which allows you to customize the resulting <code>payload</code> field and optionally add a <code>meta</code> field. See the <a href=/api/createAction#using-prepare-callbacks-to-customize-action-contents><code>createAction</code> API reference</a> for details on defining action creators with a prepare callback.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=using-action-creators-as-action-types>Using Action Creators as Action Types<a href=#using-action-creators-as-action-types class=hash-link aria-label="Direct link to Using Action Creators as Action Types" title="Direct link to Using Action Creators as Action Types">​</a></h3>
<p>Redux reducers need to look for specific action types to determine how they should update their state. Normally, this is done by defining action type strings and action creator functions separately. Redux Toolkit <code>createAction</code> function make this easier, by defining the action type as a <code>type</code> field on the action creator.</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> actionCreator </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createAction</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token string" style=color:#a6e22e>'SOME_ACTION_TYPE'</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>log</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">actionCreator</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">type</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#778090>// "SOME_ACTION_TYPE"</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> reducer </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createReducer</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">builder</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token comment" style=color:#778090>// if you use TypeScript, the action type will be correctly inferred</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  builder</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>addCase</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">actionCreator</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">state</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> action</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token comment" style=color:#778090>// Or, you can reference the .type field:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token comment" style=color:#778090>// if using TypeScript, the action type cannot be inferred that way</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  builder</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>addCase</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">actionCreator</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">type</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">state</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> action</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>This means you don't have to write or use a separate action type variable, or repeat the name and value of an action type like <code>const SOME_ACTION_TYPE = "SOME_ACTION_TYPE"</code>.</p>
<p>If you want to use one of these action creators in a switch statement, you need to reference <code>actionCreator.type</code> yourself:</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> actionCreator </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createAction</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token string" style=color:#a6e22e>'SOME_ACTION_TYPE'</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token function-variable function" style=color:#E6D874>reducer</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">state </span><span class="token parameter operator" style=color:#F8F8F2>=</span><span class="token parameter"> </span><span class="token parameter punctuation" style=color:#F8F8F2>{</span><span class="token parameter punctuation" style=color:#F8F8F2>}</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> action</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword control-flow" style=color:#F92672>switch</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">action</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">type</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token comment" style=color:#778090>// ERROR: this won't work correctly!</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token keyword" style=color:#F92672>case</span><span class="token plain"> </span><span class="token literal-property property" style=color:#F92672>actionCreator</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword control-flow" style=color:#F92672>break</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token comment" style=color:#778090>// CORRECT: this will work as expected</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token keyword" style=color:#F92672>case</span><span class="token plain"> actionCreator</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">type</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword control-flow" style=color:#F92672>break</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=creating-slices-of-state>Creating Slices of State<a href=#creating-slices-of-state class=hash-link aria-label="Direct link to Creating Slices of State" title="Direct link to Creating Slices of State">​</a></h2>
<p>Redux state is typically organized into "slices", defined by the reducers that are passed to <code>combineReducers</code>:</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> combineReducers </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'redux'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports">usersReducer</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./usersReducer'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports">postsReducer</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./postsReducer'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> rootReducer </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>combineReducers</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>users</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> usersReducer</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>posts</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> postsReducer</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>In this example, both <code>users</code> and <code>posts</code> would be considered "slices". Both of the reducers:</p>
<ul>
<li>"Own" a piece of state, including what the initial value is</li>
<li>Define how that state is updated</li>
<li>Define which specific actions result in state updates</li>
</ul>
<p>The common approach is to define a slice's reducer function in its own file, and the action creators in a second file. Because both functions need to refer to the same action types, those are usually defined in a third file and imported in both places:</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token comment" style=color:#778090>// postsConstants.js</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token constant" style=color:#F92672>CREATE_POST</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'CREATE_POST'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token constant" style=color:#F92672>UPDATE_POST</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'UPDATE_POST'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token constant" style=color:#F92672>DELETE_POST</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'DELETE_POST'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#778090>// postsActions.js</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> </span><span class="token constant" style=color:#F92672>CREATE_POST</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token constant" style=color:#F92672>UPDATE_POST</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token constant" style=color:#F92672>DELETE_POST</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./postConstants'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>function</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>addPost</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">id</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> title</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword control-flow" style=color:#F92672>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token literal-property property" style=color:#F92672>type</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token constant" style=color:#F92672>CREATE_POST</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token literal-property property" style=color:#F92672>payload</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> id</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> title </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#778090>// postsReducer.js</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> </span><span class="token constant" style=color:#F92672>CREATE_POST</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token constant" style=color:#F92672>UPDATE_POST</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token constant" style=color:#F92672>DELETE_POST</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./postConstants'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> initialState </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>default</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>function</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>postsReducer</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">state </span><span class="token parameter operator" style=color:#F8F8F2>=</span><span class="token parameter"> initialState</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> action</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword control-flow" style=color:#F92672>switch</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">action</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">type</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token keyword" style=color:#F92672>case</span><span class="token plain"> </span><span class="token constant" style=color:#F92672>CREATE_POST</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token comment" style=color:#778090>// omit implementation</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token keyword module" style=color:#F92672>default</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword control-flow" style=color:#F92672>return</span><span class="token plain"> state</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>The only truly necessary part here is the reducer itself. Consider the other parts:</p>
<ul>
<li>We could have written the action types as inline strings in both places</li>
<li>The action creators are good, but they're not <em>required</em> to use Redux - a component could skip supplying a <code>mapDispatch</code> argument to <code>connect</code>, and just call <code>this.props.dispatch({type : "CREATE_POST", payload : {id : 123, title : "Hello World"}})</code> itself</li>
<li>The only reason we're even writing multiple files is because it's common to separate code by what it does</li>
</ul>
<p>The <a href=https://github.com/erikras/ducks-modular-redux target=_blank rel="noopener noreferrer">"ducks" file structure</a> proposes putting all of your Redux-related logic for a given slice into a single file, like this:</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token comment" style=color:#778090>// postsDuck.js</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token constant" style=color:#F92672>CREATE_POST</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'CREATE_POST'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token constant" style=color:#F92672>UPDATE_POST</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'UPDATE_POST'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token constant" style=color:#F92672>DELETE_POST</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'DELETE_POST'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>function</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>addPost</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">id</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> title</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword control-flow" style=color:#F92672>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token literal-property property" style=color:#F92672>type</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token constant" style=color:#F92672>CREATE_POST</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token literal-property property" style=color:#F92672>payload</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> id</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> title </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> initialState </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>default</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>function</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>postsReducer</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">state </span><span class="token parameter operator" style=color:#F8F8F2>=</span><span class="token parameter"> initialState</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> action</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword control-flow" style=color:#F92672>switch</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">action</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">type</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token keyword" style=color:#F92672>case</span><span class="token plain"> </span><span class="token constant" style=color:#F92672>CREATE_POST</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token comment" style=color:#778090>// Omit actual code</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword control-flow" style=color:#F92672>break</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token keyword module" style=color:#F92672>default</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword control-flow" style=color:#F92672>return</span><span class="token plain"> state</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>That simplifies things because we don't need to have multiple files, and we can remove the redundant imports of the action type constants. But, we still have to write the action types and the action creators by hand.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=defining-functions-in-objects>Defining Functions in Objects<a href=#defining-functions-in-objects class=hash-link aria-label="Direct link to Defining Functions in Objects" title="Direct link to Defining Functions in Objects">​</a></h3>
<p>In modern JavaScript, there are several legal ways to define both keys and functions in an object (and this isn't specific to Redux), and you can mix and match different key definitions and function definitions. For example, these are all legal ways to define a function inside an object:</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> keyName </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"ADD_TODO4"</span><span class="token punctuation" style=color:#F8F8F2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> reducerObject </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token comment" style=color:#778090>// Explicit quotes for the key name, arrow function for the reducer</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token string-property property" style=color:#F92672>"ADD_TODO1"</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">state</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> action</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token comment" style=color:#778090>// Bare key with no quotes, function keyword</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token function-variable function maybe-class-name" style=color:#E6D874>ADD_TODO2</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>function</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">state</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> action</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token comment" style=color:#778090>// Object literal function shorthand</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token constant" style=color:#F92672>ADD_TODO3</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">state</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> action</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token comment" style=color:#778090>// Computed property</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">	</span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token plain">keyName</span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">state</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> action</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>Using the <a href=https://www.sitepoint.com/es6-enhanced-object-literals/ target=_blank rel="noopener noreferrer">"object literal function shorthand"</a> is probably the shortest code, but feel free to use whichever of those approaches you want.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=simplifying-slices-with-createslice>Simplifying Slices with <code>createSlice</code><a href=#simplifying-slices-with-createslice class=hash-link aria-label="Direct link to simplifying-slices-with-createslice" title="Direct link to simplifying-slices-with-createslice">​</a></h3>
<p>To simplify this process, Redux Toolkit includes a <code>createSlice</code> function that will auto-generate the action types and action creators for you, based on the names of the reducer functions you provide.</p>
<p>Here's how that posts example would look with <code>createSlice</code>:</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> postsSlice </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createSlice</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>name</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'posts'</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>initialState</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>reducers</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token function" style=color:#E6D874>createPost</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">state</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> action</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token function" style=color:#E6D874>updatePost</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">state</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> action</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token function" style=color:#E6D874>deletePost</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">state</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> action</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>log</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">postsSlice</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#778090>/*</span><br></span><span class=token-line style=color:#f8f8f2><span class="token comment" style=color:#778090>{</span><br></span><span class=token-line style=color:#f8f8f2><span class="token comment" style=color:#778090>    name: 'posts',</span><br></span><span class=token-line style=color:#f8f8f2><span class="token comment" style=color:#778090>    actions : {</span><br></span><span class=token-line style=color:#f8f8f2><span class="token comment" style=color:#778090>        createPost,</span><br></span><span class=token-line style=color:#f8f8f2><span class="token comment" style=color:#778090>        updatePost,</span><br></span><span class=token-line style=color:#f8f8f2><span class="token comment" style=color:#778090>        deletePost,</span><br></span><span class=token-line style=color:#f8f8f2><span class="token comment" style=color:#778090>    },</span><br></span><span class=token-line style=color:#f8f8f2><span class="token comment" style=color:#778090>    reducer</span><br></span><span class=token-line style=color:#f8f8f2><span class="token comment" style=color:#778090>}</span><br></span><span class=token-line style=color:#f8f8f2><span class="token comment" style=color:#778090>*/</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> createPost </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> postsSlice</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">actions</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>log</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token function" style=color:#E6D874>createPost</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> </span><span class="token literal-property property" style=color:#F92672>id</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token number" style=color:#AE81FF>123</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token literal-property property" style=color:#F92672>title</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'Hello World'</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#778090>// {type : "posts/createPost", payload : {id : 123, title : "Hello World"}}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><code>createSlice</code> looked at all of the functions that were defined in the <code>reducers</code> field, and for every "case reducer" function provided, generates an action creator that uses the name of the reducer as the action type itself. So, the <code>createPost</code> reducer became an action type of <code>"posts/createPost"</code>, and the <code>createPost()</code> action creator will return an action with that type.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=exporting-and-using-slices>Exporting and Using Slices<a href=#exporting-and-using-slices class=hash-link aria-label="Direct link to Exporting and Using Slices" title="Direct link to Exporting and Using Slices">​</a></h3>
<p>Most of the time, you'll want to define a slice, and export its action creators and reducers. The recommended way to do this is using ES6 destructuring and export syntax:</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> postsSlice </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createSlice</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>name</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'posts'</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>initialState</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>reducers</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token function" style=color:#E6D874>createPost</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">state</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> action</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token function" style=color:#E6D874>updatePost</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">state</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> action</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token function" style=color:#E6D874>deletePost</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">state</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> action</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#778090>// Extract the action creators object and the reducer</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> actions</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> reducer </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> postsSlice</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#778090>// Extract and export each action creator by name</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> createPost</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> updatePost</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> deletePost </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> actions</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#778090>// Export the reducer, either as a default or named export</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>default</span><span class="token plain"> reducer</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>You could also just export the slice object itself directly if you prefer.</p>
<p>Slices defined this way are very similar in concept to the <a href=https://github.com/erikras/ducks-modular-redux target=_blank rel="noopener noreferrer">"Redux Ducks" pattern</a> for defining and exporting action creators and reducers. However, there are a couple potential downsides to be aware of when importing and exporting slices.</p>
<p>First, <strong>Redux action types are not meant to be exclusive to a single slice</strong>. Conceptually, each slice reducer "owns" its own piece of the Redux state, but it should be able to listen to any action type and update its state appropriately. For example, many different slices might want to respond to a "user logged out" action by clearing data or resetting back to initial state values. Keep that in mind as you design your state shape and create your slices.</p>
<p>Second, <strong>JS modules can have "circular reference" problems if two modules try to import each other</strong>. This can result in imports being undefined, which will likely break the code that needs that import. Specifically in the case of "ducks" or slices, this can occur if slices defined in two different files both want to respond to actions defined in the other file.</p>
<p>This CodeSandbox example demonstrates the problem:</p>
<iframe src="https://codesandbox.io/embed/rw7ppj4z0m/?runonclick=1" style=width:100%;height:500px;border:0;border-radius:4px;overflow:hidden sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe>
<p>If you encounter this, you may need to restructure your code in a way that avoids the circular references. This will usually require extracting shared code to a separate common file that both modules can import and use. In this case, you might define some common action types in a separate file using <code>createAction</code>, import those action creators into each slice file, and handle them using the <code>extraReducers</code> argument.</p>
<p>The article <a href=https://medium.com/visual-development/how-to-fix-nasty-circular-dependency-issues-once-and-for-all-in-javascript-typescript-a04c987cf0de target=_blank rel="noopener noreferrer">How to fix circular dependency issues in JS</a> has additional info and examples that can help with this issue.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=asynchronous-logic-and-data-fetching>Asynchronous Logic and Data Fetching<a href=#asynchronous-logic-and-data-fetching class=hash-link aria-label="Direct link to Asynchronous Logic and Data Fetching" title="Direct link to Asynchronous Logic and Data Fetching">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=using-middleware-to-enable-async-logic>Using Middleware to Enable Async Logic<a href=#using-middleware-to-enable-async-logic class=hash-link aria-label="Direct link to Using Middleware to Enable Async Logic" title="Direct link to Using Middleware to Enable Async Logic">​</a></h3>
<p>By itself, a Redux store doesn't know anything about async logic. It only knows how to synchronously dispatch actions, update the state by calling the root reducer function, and notify the UI that something has changed. Any asynchronicity has to happen outside the store.</p>
<p>But, what if you want to have async logic interact with the store by dispatching or checking the current store state? That's where <a href=https://redux.js.org/advanced/middleware target=_blank rel="noopener noreferrer">Redux middleware</a> come in. They extend the store, and allow you to:</p>
<ul>
<li>Execute extra logic when any action is dispatched (such as logging the action and state)</li>
<li>Pause, modify, delay, replace, or halt dispatched actions</li>
<li>Write extra code that has access to <code>dispatch</code> and <code>getState</code></li>
<li>Teach <code>dispatch</code> how to accept other values besides plain action objects, such as functions and promises, by intercepting them and dispatching real action objects instead</li>
</ul>
<p><a href=https://redux.js.org/faq/actions#how-can-i-represent-side-effects-such-as-ajax-calls-why-do-we-need-things-like-action-creators-thunks-and-middleware-to-do-async-behavior target=_blank rel="noopener noreferrer">The most common reason to use middleware is to allow different kinds of async logic to interact with the store</a>. This allows you to write code that can dispatch actions and check the store state, while keeping that logic separate from your UI.</p>
<p>There are many kinds of async middleware for Redux, and each lets you write your logic using different syntax. The most common async middleware are:</p>
<ul>
<li><a href=https://github.com/reduxjs/redux-thunk target=_blank rel="noopener noreferrer"><code>redux-thunk</code></a>, which lets you write plain functions that may contain async logic directly</li>
<li><a href=https://github.com/redux-saga/redux-saga target=_blank rel="noopener noreferrer"><code>redux-saga</code></a>, which uses generator functions that return descriptions of behavior so they can be executed by the middleware</li>
<li><a href=https://github.com/redux-observable/redux-observable/ target=_blank rel="noopener noreferrer"><code>redux-observable</code></a>, which uses the RxJS observable library to create chains of functions that process actions</li>
</ul>
<p><a href=https://redux.js.org/faq/actions#what-async-middleware-should-i-use-how-do-you-decide-between-thunks-sagas-observables-or-something-else target=_blank rel="noopener noreferrer">Each of these libraries has different use cases and tradeoffs</a>.</p>
<div class="theme-admonition theme-admonition-tip admonition_WCGJ alert alert--success"><div class=admonitionHeading_GCBg><span class=admonitionIcon_L39b><svg viewBox="0 0 12 16"><path fill-rule=evenodd d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"/></svg></span>tip</div><div class=admonitionContent_pbrs><p>Redux Toolkit's <a href=/rtk-query/overview><strong>RTK Query data fetching API</strong></a> is a purpose built data fetching and caching solution for Redux apps, and can <strong>eliminate the need to write <em>any</em> thunks or reducers to manage data fetching</strong>. We encourage you to try it out and see if it can help simplify the data fetching code in your own apps!</div></div>
<p>If you do need to write data fetching logic yourself, we recommend <a href=https://github.com/reduxjs/redux-thunk target=_blank rel="noopener noreferrer">using the Redux Thunk middleware as the standard approach</a>, as it is sufficient for most typical use cases (such as basic AJAX data fetching). In addition, use of the <code>async/await</code> syntax in thunks makes them easier to read.</p>
<p><strong>The Redux Toolkit <code>configureStore</code> function <a href=/api/getDefaultMiddleware>automatically sets up the thunk middleware by default</a></strong>, so you can immediately start writing thunks as part of your application code.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=defining-async-logic-in-slices>Defining Async Logic in Slices<a href=#defining-async-logic-in-slices class=hash-link aria-label="Direct link to Defining Async Logic in Slices" title="Direct link to Defining Async Logic in Slices">​</a></h3>
<p>Redux Toolkit does not currently provide any special APIs or syntax for writing thunk functions. In particular, <strong>they cannot be defined as part of a <code>createSlice()</code> call</strong>. You have to write them separate from the reducer logic, exactly the same as with plain Redux code.</p>
<p>Thunks typically dispatch plain actions, such as <code>dispatch(dataLoaded(response.data))</code>.</p>
<p>Many Redux apps have structured their code using a "folder-by-type" approach. In that structure, thunk action creators are usually defined in an "actions" file, alongside the plain action creators.</p>
<p>Because we don't have separate "actions" files, <strong>it makes sense to write these thunks directly in our "slice" files</strong>. That way, they have access to the plain action creators from the slice, and it's easy to find where the thunk function lives.</p>
<p>A typical slice file that includes thunks would look like this:</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token comment" style=color:#778090>// First, define the reducer and action creators via `createSlice`</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> usersSlice </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createSlice</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>name</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'users'</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>initialState</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token literal-property property" style=color:#F92672>loading</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'idle'</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token literal-property property" style=color:#F92672>users</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>reducers</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token function" style=color:#E6D874>usersLoading</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">state</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> action</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token comment" style=color:#778090>// Use a "state machine" approach for loading state instead of booleans</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword control-flow" style=color:#F92672>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">state</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">loading</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>===</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'idle'</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        state</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">loading</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'pending'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token function" style=color:#E6D874>usersReceived</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">state</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> action</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword control-flow" style=color:#F92672>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">state</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">loading</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>===</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'pending'</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        state</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">loading</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'idle'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        state</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">users</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> action</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">payload</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#778090>// Destructure and export the plain action creators</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> usersLoading</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> usersReceived </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> usersSlice</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">actions</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#778090>// Define a thunk that dispatches those action creators</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token function-variable function" style=color:#E6D874>fetchUsers</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>async</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">dispatch</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token function" style=color:#E6D874>dispatch</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token function" style=color:#E6D874>usersLoading</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> response </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token keyword control-flow" style=color:#F92672>await</span><span class="token plain"> usersAPI</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>fetchAll</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token function" style=color:#E6D874>dispatch</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token function" style=color:#E6D874>usersReceived</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">response</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">data</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=redux-data-fetching-patterns>Redux Data Fetching Patterns<a href=#redux-data-fetching-patterns class=hash-link aria-label="Direct link to Redux Data Fetching Patterns" title="Direct link to Redux Data Fetching Patterns">​</a></h3>
<p>Data fetching logic for Redux typically follows a predictable pattern:</p>
<ul>
<li>A "start" action is dispatched before the request to indicate that the request is in progress. This may be used to track loading state, to allow skipping duplicate requests, or show loading indicators in the UI.</li>
<li>The async request is made</li>
<li>Depending on the request result, the async logic dispatches either a "success" action containing the result data, or a "failure" action containing error details. The reducer logic clears the loading state in both cases, and either processes the result data from the success case, or stores the error value for potential display.</li>
</ul>
<p>These steps are not required, but are <a href=https://redux.js.org/advanced/async-actions target=_blank rel="noopener noreferrer">recommended in the Redux tutorials as a suggested pattern</a>.</p>
<p>A typical implementation might look like:</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token function-variable function" style=color:#E6D874>getRepoDetailsStarted</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>type</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'repoDetails/fetchStarted'</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token function-variable function" style=color:#E6D874>getRepoDetailsSuccess</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">repoDetails</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>type</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'repoDetails/fetchSucceeded'</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>payload</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> repoDetails</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token function-variable function" style=color:#E6D874>getRepoDetailsFailed</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">error</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>type</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'repoDetails/fetchFailed'</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  error</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token function-variable function" style=color:#E6D874>fetchIssuesCount</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">org</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> repo</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>async</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">dispatch</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token function" style=color:#E6D874>dispatch</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token function" style=color:#E6D874>getRepoDetailsStarted</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword control-flow" style=color:#F92672>try</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> repoDetails </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token keyword control-flow" style=color:#F92672>await</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>getRepoDetails</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">org</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> repo</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token function" style=color:#E6D874>dispatch</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token function" style=color:#E6D874>getRepoDetailsSuccess</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">repoDetails</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword control-flow" style=color:#F92672>catch</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">err</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token function" style=color:#E6D874>dispatch</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token function" style=color:#E6D874>getRepoDetailsFailed</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">err</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>toString</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>However, writing code using this approach is tedious. Each separate type of request needs repeated similar implementation:</p>
<ul>
<li>Unique action types need to be defined for the three different cases</li>
<li>Each of those action types usually has a corresponding action creator function</li>
<li>A thunk has to be written that dispatches the correct actions in the right sequence</li>
</ul>
<p><code>createAsyncThunk</code> abstracts this pattern by generating the action types and action creators and generating a thunk that dispatches those actions.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=async-requests-with-createasyncthunk>Async Requests with <code>createAsyncThunk</code><a href=#async-requests-with-createasyncthunk class=hash-link aria-label="Direct link to async-requests-with-createasyncthunk" title="Direct link to async-requests-with-createasyncthunk">​</a></h3>
<p>As a developer, you are probably most concerned with the actual logic needed to make an API request, what action type names show up in the Redux action history log, and how your reducers should process the fetched data. The repetitive details of defining the multiple action types and dispatching the actions in the right sequence aren't what matters.</p>
<p><code>createAsyncThunk</code> simplifies this process - you only need to provide a string for the action type prefix and a payload creator callback that does the actual async logic and returns a promise with the result. In return, <code>createAsyncThunk</code> will give you a thunk that will take care of dispatching the right actions based on the promise you return, and action types that you can handle in your reducers:</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> createAsyncThunk</span><span class="token imports punctuation" style=color:#F8F8F2>,</span><span class="token imports"> createSlice </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'@reduxjs/toolkit'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> userAPI </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./userAPI'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#778090>// First, create the thunk</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> fetchUserById </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createAsyncThunk</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  </span><span class="token string" style=color:#a6e22e>'users/fetchByIdStatus'</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>async</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">userId</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> thunkAPI</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">    </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> response </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token keyword control-flow" style=color:#F92672>await</span><span class="token plain"> userAPI</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>fetchById</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">userId</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">    </span><span class="token keyword control-flow" style=color:#F92672>return</span><span class="token plain"> response</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">data</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#778090>// Then, handle actions in your reducers:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> usersSlice </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createSlice</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>name</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'users'</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>initialState</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> </span><span class="token literal-property property" style=color:#F92672>entities</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token literal-property property" style=color:#F92672>loading</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'idle'</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>reducers</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token comment" style=color:#778090>// standard reducer logic, with auto-generated action types per reducer</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token function-variable function" style=color:#E6D874>extraReducers</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">builder</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token comment" style=color:#778090>// Add reducers for additional action types here, and handle loading state as needed</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">    builder</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>addCase</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">fetchUserById</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">fulfilled</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">state</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> action</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">      </span><span class="token comment" style=color:#778090>// Add user to the state array</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">      state</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">entities</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>push</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">action</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">payload</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#778090>// Later, dispatch the thunk as needed in the app</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain"></span><span class="token function" style=color:#E6D874>dispatch</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token function" style=color:#E6D874>fetchUserById</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token number" style=color:#AE81FF>123</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>)</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>The thunk action creator accepts a single argument, which will be passed as the first argument to your payload creator callback.</p>
<p>The payload creator will also receive a <code>thunkAPI</code> object containing the parameters that are normally passed to a standard Redux thunk function, as well as an auto-generated unique random request ID string and an <a href=https://developer.mozilla.org/en-US/docs/Web/API/AbortController/signal target=_blank rel="noopener noreferrer"><code>AbortController.signal</code> object</a>:</p>
<div class="language-ts codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-ts codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#F92672>interface</span><span class="token plain"> </span><span class="token class-name">ThunkAPI</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  dispatch</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token builtin" style=color:#a6e22e>Function</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  getState</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token builtin" style=color:#a6e22e>Function</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  extra</span><span class="token operator" style=color:#F8F8F2>?</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token builtin" style=color:#a6e22e>any</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  requestId</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token builtin" style=color:#a6e22e>string</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  signal</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> AbortSignal</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>You can use any of these as needed inside the payload callback to determine what the final result should be.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=managing-normalized-data>Managing Normalized Data<a href=#managing-normalized-data class=hash-link aria-label="Direct link to Managing Normalized Data" title="Direct link to Managing Normalized Data">​</a></h2>
<p>Most applications typically deal with data that is deeply nested or relational. The goal of normalizing data is to efficiently organize the data in your state. This is typically done by storing collections as objects with the key of an <code>id</code>, while storing a sorted array of those <code>ids</code>. For a more in-depth explanation and further examples, there is a great reference in the <a href=https://redux.js.org/recipes/structuring-reducers/normalizing-state-shape target=_blank rel="noopener noreferrer">Redux docs page on "Normalizing State Shape"</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=normalizing-by-hand>Normalizing by hand<a href=#normalizing-by-hand class=hash-link aria-label="Direct link to Normalizing by hand" title="Direct link to Normalizing by hand">​</a></h3>
<p>Normalizing data doesn't require any special libraries. Here's a basic example of how you might normalize the response from a <code>fetchAll</code> API request that returns data in the shape of <code>{ users: [{id: 1, first_name: 'normalized', last_name: 'person'}] }</code>, using some hand-written logic:</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> createSlice</span><span class="token imports punctuation" style=color:#F8F8F2>,</span><span class="token imports"> createAsyncThunk </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'@reduxjs/toolkit'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports">userAPI</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./userAPI'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> fetchUsers </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createAsyncThunk</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token string" style=color:#a6e22e>'users/fetchAll'</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>async</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> response </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token keyword control-flow" style=color:#F92672>await</span><span class="token plain"> userAPI</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>fetchAll</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword control-flow" style=color:#F92672>return</span><span class="token plain"> response</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">data</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> slice </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createSlice</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>name</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'users'</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>initialState</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token literal-property property" style=color:#F92672>ids</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token literal-property property" style=color:#F92672>entities</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>reducers</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token function-variable function" style=color:#E6D874>extraReducers</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">builder</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    builder</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>addCase</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">fetchUsers</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">fulfilled</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">state</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> action</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token comment" style=color:#778090>// reduce the collection by the id property into a shape of { 1: { ...user }}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> byId </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> action</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">payload</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">users</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>reduce</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">byId</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> user</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        byId</span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token plain">user</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">id</span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> user</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token keyword control-flow" style=color:#F92672>return</span><span class="token plain"> byId</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      state</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">entities</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> byId</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      state</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">ids</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token known-class-name class-name">Object</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>keys</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">byId</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>Although we're capable of writing this code, it does become repetitive, especially if you're handling multiple types of data. In addition, this example only handles loading entries into the state, not updating them.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=normalizing-with-normalizr>Normalizing with <code>normalizr</code><a href=#normalizing-with-normalizr class=hash-link aria-label="Direct link to normalizing-with-normalizr" title="Direct link to normalizing-with-normalizr">​</a></h3>
<p><a href=https://github.com/paularmstrong/normalizr target=_blank rel="noopener noreferrer"><code>normalizr</code></a> is a popular existing library for normalizing data. You can use it on its own without Redux, but it is very commonly used with Redux. The typical usage is to format collections from an API response and then process them in your reducers.</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> createSlice</span><span class="token imports punctuation" style=color:#F8F8F2>,</span><span class="token imports"> createAsyncThunk </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'@reduxjs/toolkit'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> normalize</span><span class="token imports punctuation" style=color:#F8F8F2>,</span><span class="token imports"> schema </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'normalizr'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports">userAPI</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./userAPI'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> userEntity </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>new</span><span class="token plain"> </span><span class="token class-name">schema</span><span class="token class-name punctuation" style=color:#F8F8F2>.</span><span class="token class-name">Entity</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token string" style=color:#a6e22e>'users'</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> fetchUsers </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createAsyncThunk</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token string" style=color:#a6e22e>'users/fetchAll'</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>async</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> response </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token keyword control-flow" style=color:#F92672>await</span><span class="token plain"> userAPI</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>fetchAll</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token comment" style=color:#778090>// Normalize the data before passing it to our reducer</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> normalized </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>normalize</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">response</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">data</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token plain">userEntity</span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword control-flow" style=color:#F92672>return</span><span class="token plain"> normalized</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">entities</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> slice </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createSlice</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>name</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'users'</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>initialState</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token literal-property property" style=color:#F92672>ids</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token literal-property property" style=color:#F92672>entities</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>reducers</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token function-variable function" style=color:#E6D874>extraReducers</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">builder</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    builder</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>addCase</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">fetchUsers</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">fulfilled</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">state</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> action</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      state</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">entities</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> action</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">payload</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">users</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      state</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">ids</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token known-class-name class-name">Object</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>keys</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">action</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">payload</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">users</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>As with the hand-written version, this doesn't handle adding additional entries into the state, or updating them later - it's just loading in everything that was received.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=normalizing-with-createentityadapter>Normalizing with <code>createEntityAdapter</code><a href=#normalizing-with-createentityadapter class=hash-link aria-label="Direct link to normalizing-with-createentityadapter" title="Direct link to normalizing-with-createentityadapter">​</a></h3>
<p>Redux Toolkit's <code>createEntityAdapter</code> API provides a standardized way to store your data in a slice by taking a collection and putting it into the shape of <code>{ ids: [], entities: {} }</code>. Along with this predefined state shape, it generates a set of reducer functions and selectors that know how to work with the data.</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token imports">  createSlice</span><span class="token imports punctuation" style=color:#F8F8F2>,</span><span class="token imports"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token imports">  createAsyncThunk</span><span class="token imports punctuation" style=color:#F8F8F2>,</span><span class="token imports"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token imports">  createEntityAdapter</span><span class="token imports punctuation" style=color:#F8F8F2>,</span><span class="token imports"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token imports"></span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'@reduxjs/toolkit'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports">userAPI</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./userAPI'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> fetchUsers </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createAsyncThunk</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token string" style=color:#a6e22e>'users/fetchAll'</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>async</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> response </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token keyword control-flow" style=color:#F92672>await</span><span class="token plain"> userAPI</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>fetchAll</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token comment" style=color:#778090>// In this case, `response.data` would be:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token comment" style=color:#778090>// [{id: 1, first_name: 'Example', last_name: 'User'}]</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword control-flow" style=color:#F92672>return</span><span class="token plain"> response</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">data</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> updateUser </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createAsyncThunk</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token string" style=color:#a6e22e>'users/updateOne'</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>async</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">arg</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> response </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token keyword control-flow" style=color:#F92672>await</span><span class="token plain"> userAPI</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>updateUser</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">arg</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token comment" style=color:#778090>// In this case, `response.data` would be:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token comment" style=color:#778090>// { id: 1, first_name: 'Example', last_name: 'UpdatedLastName'}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword control-flow" style=color:#F92672>return</span><span class="token plain"> response</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">data</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> usersAdapter </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createEntityAdapter</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#778090>// By default, `createEntityAdapter` gives you `{ ids: [], entities: {} }`.</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#778090>// If you want to track 'loading' or other keys, you would initialize them here:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#778090>// `getInitialState({ loading: false, activeRequestId: null })`</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> initialState </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> usersAdapter</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>getInitialState</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> slice </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createSlice</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>name</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'users'</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  initialState</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>reducers</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token literal-property property" style=color:#F92672>removeUser</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> usersAdapter</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">removeOne</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token function-variable function" style=color:#E6D874>extraReducers</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">builder</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    builder</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>addCase</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">fetchUsers</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">fulfilled</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> usersAdapter</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">upsertMany</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    builder</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>addCase</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">updateUser</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">fulfilled</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">state</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> </span><span class="token parameter punctuation" style=color:#F8F8F2>{</span><span class="token parameter"> payload </span><span class="token parameter punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> id</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token spread operator" style=color:#F8F8F2>...</span><span class="token plain">changes </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> payload</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      usersAdapter</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>updateOne</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">state</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> id</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> changes </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> reducer </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> slice</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">reducer</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>default</span><span class="token plain"> reducer</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> removeUser </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> slice</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">actions</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>You can <a href=https://codesandbox.io/s/rtk-entities-basic-example-1xubt target=_blank rel="noopener noreferrer">view the full code of this example usage on CodeSandbox</a></p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=using-createentityadapter-with-normalization-libraries>Using <code>createEntityAdapter</code> with Normalization Libraries<a href=#using-createentityadapter-with-normalization-libraries class=hash-link aria-label="Direct link to using-createentityadapter-with-normalization-libraries" title="Direct link to using-createentityadapter-with-normalization-libraries">​</a></h3>
<p>If you're already using <code>normalizr</code> or another normalization library, you could consider using it along with <code>createEntityAdapter</code>. To expand on the examples above, here is a demonstration of how we could use <code>normalizr</code> to format a payload, then leverage the utilities <code>createEntityAdapter</code> provides.</p>
<p>By default, the <code>setAll</code>, <code>addMany</code>, and <code>upsertMany</code> CRUD methods expect an array of entities. However, they also allow you to pass in an object that is in the shape of <code>{ 1: { id: 1, ... }}</code> as an alternative, which makes it easier to insert pre-normalized data.</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token comment" style=color:#778090>// features/articles/articlesSlice.js</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token imports">  createSlice</span><span class="token imports punctuation" style=color:#F8F8F2>,</span><span class="token imports"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token imports">  createEntityAdapter</span><span class="token imports punctuation" style=color:#F8F8F2>,</span><span class="token imports"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token imports">  createAsyncThunk</span><span class="token imports punctuation" style=color:#F8F8F2>,</span><span class="token imports"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token imports">  createSelector</span><span class="token imports punctuation" style=color:#F8F8F2>,</span><span class="token imports"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token imports"></span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'@reduxjs/toolkit'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports">fakeAPI</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'../../services/fakeAPI'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> normalize</span><span class="token imports punctuation" style=color:#F8F8F2>,</span><span class="token imports"> schema </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'normalizr'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#778090>// Define normalizr entity schemas</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> userEntity </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>new</span><span class="token plain"> </span><span class="token class-name">schema</span><span class="token class-name punctuation" style=color:#F8F8F2>.</span><span class="token class-name">Entity</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token string" style=color:#a6e22e>'users'</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> commentEntity </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>new</span><span class="token plain"> </span><span class="token class-name">schema</span><span class="token class-name punctuation" style=color:#F8F8F2>.</span><span class="token class-name">Entity</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token string" style=color:#a6e22e>'comments'</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>commenter</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> userEntity</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> articleEntity </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>new</span><span class="token plain"> </span><span class="token class-name">schema</span><span class="token class-name punctuation" style=color:#F8F8F2>.</span><span class="token class-name">Entity</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token string" style=color:#a6e22e>'articles'</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>author</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> userEntity</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>comments</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token plain">commentEntity</span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> articlesAdapter </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createEntityAdapter</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> fetchArticle </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createAsyncThunk</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token string" style=color:#a6e22e>'articles/fetchArticle'</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>async</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">id</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> data </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token keyword control-flow" style=color:#F92672>await</span><span class="token plain"> fakeAPI</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">articles</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>show</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">id</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token comment" style=color:#778090>// Normalize the data so reducers can load a predictable payload, like:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token comment" style=color:#778090>// `action.payload = { users: {}, articles: {}, comments: {} }`</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> normalized </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>normalize</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">data</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> articleEntity</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token keyword control-flow" style=color:#F92672>return</span><span class="token plain"> normalized</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">entities</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> slice </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createSlice</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>name</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'articles'</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>initialState</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> articlesAdapter</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>getInitialState</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>reducers</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token function-variable function" style=color:#E6D874>extraReducers</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">builder</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    builder</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>addCase</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">fetchArticle</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">fulfilled</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">state</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> action</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token comment" style=color:#778090>// Handle the fetch result by inserting the articles here</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      articlesAdapter</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>upsertMany</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">state</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> action</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">payload</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">articles</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> reducer </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> slice</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">reducer</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>default</span><span class="token plain"> reducer</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#778090>// features/users/usersSlice.js</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> createSlice</span><span class="token imports punctuation" style=color:#F8F8F2>,</span><span class="token imports"> createEntityAdapter </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'@reduxjs/toolkit'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> fetchArticle </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'../articles/articlesSlice'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> usersAdapter </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createEntityAdapter</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> slice </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createSlice</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>name</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'users'</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>initialState</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> usersAdapter</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>getInitialState</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>reducers</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token function-variable function" style=color:#E6D874>extraReducers</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">builder</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    builder</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>addCase</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">fetchArticle</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">fulfilled</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">state</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> action</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token comment" style=color:#778090>// And handle the same fetch result by inserting the users here</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      usersAdapter</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>upsertMany</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">state</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> action</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">payload</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">users</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> reducer </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> slice</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">reducer</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>default</span><span class="token plain"> reducer</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#778090>// features/comments/commentsSlice.js</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> createSlice</span><span class="token imports punctuation" style=color:#F8F8F2>,</span><span class="token imports"> createEntityAdapter </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'@reduxjs/toolkit'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> fetchArticle </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'../articles/articlesSlice'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> commentsAdapter </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createEntityAdapter</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> slice </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createSlice</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>name</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'comments'</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>initialState</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> commentsAdapter</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>getInitialState</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>reducers</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token function-variable function" style=color:#E6D874>extraReducers</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">builder</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    builder</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>addCase</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">fetchArticle</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">fulfilled</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">state</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> action</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token comment" style=color:#778090>// Same for the comments</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      commentsAdapter</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>upsertMany</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">state</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> action</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">payload</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">comments</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> reducer </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> slice</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">reducer</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>default</span><span class="token plain"> reducer</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>You can <a href=https://codesandbox.io/s/rtk-entities-basic-example-with-normalizr-bm3ie target=_blank rel="noopener noreferrer">view the full code of this example <code>normalizr</code> usage on CodeSandbox</a></p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=using-selectors-with-createentityadapter>Using selectors with <code>createEntityAdapter</code><a href=#using-selectors-with-createentityadapter class=hash-link aria-label="Direct link to using-selectors-with-createentityadapter" title="Direct link to using-selectors-with-createentityadapter">​</a></h3>
<p>The entity adapter provides a selector factory that generates the most common selectors for you. Taking the examples above, we can add selectors to our <code>usersSlice</code> like this:</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token comment" style=color:#778090>// Rename the exports for readability in component usage</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>selectById</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> selectUserById</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>selectIds</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> selectUserIds</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>selectEntities</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> selectUserEntities</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>selectAll</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> selectAllUsers</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>selectTotal</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> selectTotalUsers</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> usersAdapter</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>getSelectors</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">state</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> state</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">users</span><span class="token punctuation" style=color:#F8F8F2>)</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>You could then use these selectors in a component like this:</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'react'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> useSelector </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'react-redux'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> selectTotalUsers</span><span class="token imports punctuation" style=color:#F8F8F2>,</span><span class="token imports"> selectAllUsers </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./usersSlice'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports">styles</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./UsersList.module.css'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>function</span><span class="token plain"> </span><span class="token function maybe-class-name" style=color:#E6D874>UsersList</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> count </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>useSelector</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">selectTotalUsers</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> users </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>useSelector</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">selectAllUsers</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword control-flow" style=color:#F92672>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token operator" style=color:#F8F8F2>&lt;</span><span class="token plain">div</span><span class="token operator" style=color:#F8F8F2>></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token operator" style=color:#F8F8F2>&lt;</span><span class="token plain">div className</span><span class="token operator" style=color:#F8F8F2>=</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain">styles</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">row</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token operator" style=color:#F8F8F2>></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token maybe-class-name">There</span><span class="token plain"> are </span><span class="token operator" style=color:#F8F8F2>&lt;</span><span class="token plain">span className</span><span class="token operator" style=color:#F8F8F2>=</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain">styles</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">value</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token operator" style=color:#F8F8F2>></span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain">count</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token operator" style=color:#F8F8F2>&lt;</span><span class="token operator" style=color:#F8F8F2>/</span><span class="token plain">span</span><span class="token operator" style=color:#F8F8F2>></span><span class="token plain"> users</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token string" style=color:#a6e22e>' '</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain">count </span><span class="token operator" style=color:#F8F8F2>===</span><span class="token plain"> </span><span class="token number" style=color:#AE81FF>0</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>&&</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style=color:#a6e22e>`</span><span class="token template-string string" style=color:#a6e22e>Why don't you fetch some more?</span><span class="token template-string template-punctuation string" style=color:#a6e22e>`</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token operator" style=color:#F8F8F2>&lt;</span><span class="token operator" style=color:#F8F8F2>/</span><span class="token plain">div</span><span class="token operator" style=color:#F8F8F2>></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain">users</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>map</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">user</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token operator" style=color:#F8F8F2>&lt;</span><span class="token plain">div key</span><span class="token operator" style=color:#F8F8F2>=</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain">user</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">id</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token operator" style=color:#F8F8F2>></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token operator" style=color:#F8F8F2>&lt;</span><span class="token plain">div</span><span class="token operator" style=color:#F8F8F2>></span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token template-string template-punctuation string" style=color:#a6e22e>`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#F8F8F2>${</span><span class="token template-string interpolation">user</span><span class="token template-string interpolation punctuation" style=color:#F8F8F2>.</span><span class="token template-string interpolation property-access">first_name</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#F8F8F2>}</span><span class="token template-string string" style=color:#a6e22e> </span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#F8F8F2>${</span><span class="token template-string interpolation">user</span><span class="token template-string interpolation punctuation" style=color:#F8F8F2>.</span><span class="token template-string interpolation property-access">last_name</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#F8F8F2>}</span><span class="token template-string template-punctuation string" style=color:#a6e22e>`</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token operator" style=color:#F8F8F2>&lt;</span><span class="token operator" style=color:#F8F8F2>/</span><span class="token plain">div</span><span class="token operator" style=color:#F8F8F2>></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token operator" style=color:#F8F8F2>&lt;</span><span class="token operator" style=color:#F8F8F2>/</span><span class="token plain">div</span><span class="token operator" style=color:#F8F8F2>></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token operator" style=color:#F8F8F2>&lt;</span><span class="token operator" style=color:#F8F8F2>/</span><span class="token plain">div</span><span class="token operator" style=color:#F8F8F2>></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=specifying-alternate-id-fields>Specifying Alternate ID Fields<a href=#specifying-alternate-id-fields class=hash-link aria-label="Direct link to Specifying Alternate ID Fields" title="Direct link to Specifying Alternate ID Fields">​</a></h3>
<p>By default, <code>createEntityAdapter</code> assumes that your data has unique IDs in an <code>entity.id</code> field. If your data set stores its ID in a different field, you can pass in a <code>selectId</code> argument that returns the appropriate field.</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token comment" style=color:#778090>// In this instance, our user data always has a primary key of `idx`</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> userData </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>users</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> </span><span class="token literal-property property" style=color:#F92672>idx</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token number" style=color:#AE81FF>1</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token literal-property property" style=color:#F92672>first_name</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'Test'</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> </span><span class="token literal-property property" style=color:#F92672>idx</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token number" style=color:#AE81FF>2</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token literal-property property" style=color:#F92672>first_name</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'Two'</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#778090>// Since our primary key is `idx` and not `id`,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#778090>// pass in an ID selector to return that field instead</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> usersAdapter </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createEntityAdapter</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token function-variable function" style=color:#E6D874>selectId</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">user</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> user</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">idx</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=sorting-entities>Sorting Entities<a href=#sorting-entities class=hash-link aria-label="Direct link to Sorting Entities" title="Direct link to Sorting Entities">​</a></h3>
<p><code>createEntityAdapter</code> provides a <code>sortComparer</code> argument that you can leverage to sort the collection of <code>ids</code> in state. This can be very useful for when you want to guarantee a sort order and your data doesn't come presorted.</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token comment" style=color:#778090>// In this instance, our user data always has a primary key of `id`, so we do not need to provide `selectId`.</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> userData </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>users</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> </span><span class="token literal-property property" style=color:#F92672>id</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token number" style=color:#AE81FF>1</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token literal-property property" style=color:#F92672>first_name</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'Test'</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> </span><span class="token literal-property property" style=color:#F92672>id</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token number" style=color:#AE81FF>2</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token literal-property property" style=color:#F92672>first_name</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'Banana'</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#778090>// Sort by `first_name`. `state.ids` would be ordered as</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#778090>// `ids: [ 2, 1 ]`, since 'B' comes before 'T'.</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#778090>// When using the provided `selectAll` selector, the result would be sorted:</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#778090>// [{ id: 2, first_name: 'Banana' }, { id: 1, first_name: 'Test' }]</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> usersAdapter </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createEntityAdapter</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token function-variable function" style=color:#E6D874>sortComparer</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">a</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> b</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> a</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">first_name</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>localeCompare</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">b</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">first_name</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=working-with-non-serializable-data>Working with Non-Serializable Data<a href=#working-with-non-serializable-data class=hash-link aria-label="Direct link to Working with Non-Serializable Data" title="Direct link to Working with Non-Serializable Data">​</a></h2>
<p>One of the core usage principles for Redux is that <a href=https://redux.js.org/style-guide/#do-not-put-non-serializable-values-in-state-or-actions target=_blank rel="noopener noreferrer">you should not put non-serializable values in state or actions</a>.</p>
<p>However, like most rules, there are exceptions. There may be occasions when you have to deal with actions that need to accept non-serializable data. This should be done very rarely and only if necessary, and these non-serializable payloads shouldn't ever make it into your application state through a reducer.</p>
<p>The <a href=/api/serializabilityMiddleware>serializability dev check middleware</a> will automatically warn anytime it detects non-serializable values in your actions or state. We encourage you to leave this middleware active to help avoid accidentally making mistakes. However, if you <em>do</em> need to turnoff those warnings, you can customize the middleware by configuring it to ignore specific action types, or fields in actions and state:</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token function" style=color:#E6D874>configureStore</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token comment" style=color:#778090>//...</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token function-variable function" style=color:#E6D874>middleware</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">getDefaultMiddleware</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token function" style=color:#E6D874>getDefaultMiddleware</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token literal-property property" style=color:#F92672>serializableCheck</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token comment" style=color:#778090>// Ignore these action types</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token literal-property property" style=color:#F92672>ignoredActions</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token string" style=color:#a6e22e>'your/action/type'</span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token comment" style=color:#778090>// Ignore these field paths in all actions</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token literal-property property" style=color:#F92672>ignoredActionPaths</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token string" style=color:#a6e22e>'meta.arg'</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'payload.timestamp'</span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token comment" style=color:#778090>// Ignore these paths in the state</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token literal-property property" style=color:#F92672>ignoredPaths</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token string" style=color:#a6e22e>'items.dates'</span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=use-with-redux-persist>Use with Redux-Persist<a href=#use-with-redux-persist class=hash-link aria-label="Direct link to Use with Redux-Persist" title="Direct link to Use with Redux-Persist">​</a></h3>
<p>If using Redux-Persist, you should specifically ignore all the action types it dispatches:</p>
<div class="language-jsx codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-jsx codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> createRoot </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'react-dom/client'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> configureStore </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'@reduxjs/toolkit'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  persistStore</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  persistReducer</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token constant" style=color:#F92672>FLUSH</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token constant" style=color:#F92672>REHYDRATE</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token constant" style=color:#F92672>PAUSE</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token constant" style=color:#F92672>PERSIST</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token constant" style=color:#F92672>PURGE</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token constant" style=color:#F92672>REGISTER</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'redux-persist'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports">storage</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'redux-persist/lib/storage'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> </span><span class="token imports maybe-class-name">PersistGate</span><span class="token imports"> </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'redux-persist/integration/react'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports maybe-class-name">App</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./App'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports">rootReducer</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./reducers'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> persistConfig </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>key</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'root'</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>version</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token number" style=color:#AE81FF>1</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  storage</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> persistedReducer </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>persistReducer</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">persistConfig</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> rootReducer</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> store </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>configureStore</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>reducer</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> persistedReducer</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token function-variable function" style=color:#E6D874>middleware</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">getDefaultMiddleware</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token function" style=color:#E6D874>getDefaultMiddleware</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token literal-property property" style=color:#F92672>serializableCheck</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token literal-property property" style=color:#F92672>ignoredActions</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token constant" style=color:#F92672>FLUSH</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token constant" style=color:#F92672>REHYDRATE</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token constant" style=color:#F92672>PAUSE</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token constant" style=color:#F92672>PERSIST</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token constant" style=color:#F92672>PURGE</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token constant" style=color:#F92672>REGISTER</span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>let</span><span class="token plain"> persistor </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>persistStore</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">store</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> container </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token dom variable" style=color:#F8F8F2>document</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>getElementById</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token string" style=color:#a6e22e>'root'</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword control-flow" style=color:#F92672>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">container</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> root </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createRoot</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">container</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  root</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>render</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token tag punctuation" style=color:#F8F8F2>&lt;</span><span class="token tag class-name" style=color:#F92672>Provider</span><span class="token tag" style=color:#F92672> </span><span class="token tag attr-name" style=color:#a6e22e>store</span><span class="token tag script language-javascript script-punctuation punctuation" style=color:#F8F8F2>=</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>{</span><span class="token tag script language-javascript" style=color:#F92672>store</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>}</span><span class="token tag punctuation" style=color:#F8F8F2>></span><span class="token plain-text"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain-text">      </span><span class="token tag punctuation" style=color:#F8F8F2>&lt;</span><span class="token tag class-name" style=color:#F92672>PersistGate</span><span class="token tag" style=color:#F92672> </span><span class="token tag attr-name" style=color:#a6e22e>loading</span><span class="token tag script language-javascript script-punctuation punctuation" style=color:#F8F8F2>=</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>{</span><span class="token tag script language-javascript keyword null nil" style=color:#F92672>null</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>}</span><span class="token tag" style=color:#F92672> </span><span class="token tag attr-name" style=color:#a6e22e>persistor</span><span class="token tag script language-javascript script-punctuation punctuation" style=color:#F8F8F2>=</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>{</span><span class="token tag script language-javascript" style=color:#F92672>persistor</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>}</span><span class="token tag punctuation" style=color:#F8F8F2>></span><span class="token plain-text"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain-text">        </span><span class="token tag punctuation" style=color:#F8F8F2>&lt;</span><span class="token tag class-name" style=color:#F92672>App</span><span class="token tag" style=color:#F92672> </span><span class="token tag punctuation" style=color:#F8F8F2>/></span><span class="token plain-text"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain-text">      </span><span class="token tag punctuation" style=color:#F8F8F2>&lt;/</span><span class="token tag class-name" style=color:#F92672>PersistGate</span><span class="token tag punctuation" style=color:#F8F8F2>></span><span class="token plain-text"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain-text">    </span><span class="token tag punctuation" style=color:#F8F8F2>&lt;/</span><span class="token tag class-name" style=color:#F92672>Provider</span><span class="token tag punctuation" style=color:#F8F8F2>></span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword control-flow" style=color:#F92672>else</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword control-flow" style=color:#F92672>throw</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token string" style=color:#a6e22e>"Root element with ID 'root' was not found in the document. Ensure there is a corresponding HTML element with the ID 'root' in your HTML file."</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>Additionally, you can purge any persisted state by adding an extra reducer to the specific slice that you would like to clear when calling persistor.purge(). This is especially helpful when you are looking to clear persisted state on a dispatched logout action.</p>
<div class="language-ts codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-ts codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> </span><span class="token constant" style=color:#F92672>PURGE</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>"redux-persist"</span><span class="token punctuation" style=color:#F8F8F2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token operator" style=color:#F8F8F2>...</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token function-variable function" style=color:#E6D874>extraReducers</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">builder</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    builder</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token function" style=color:#E6D874>addCase</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token constant" style=color:#F92672>PURGE</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">state</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        customEntityAdapter</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token function" style=color:#E6D874>removeAll</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">state</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>It is also strongly recommended to blacklist any api(s) that you have configured with RTK Query. If the api slice reducer is not blacklisted, the api cache will be automatically persisted and restored which could leave you with phantom subscriptions from components that do not exist any more. Configuring this should look something like this:</p>
<div class="language-ts codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-ts codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> persistConfig </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  key</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'root'</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  version</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token number" style=color:#AE81FF>1</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  storage</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  blacklist</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token plain">pokemonApi</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token plain">reducerPath</span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>See <a href=https://github.com/reduxjs/redux-toolkit/issues/121 target=_blank rel="noopener noreferrer">Redux Toolkit #121: How to use this with Redux-Persist?</a> and <a href=https://github.com/rt2zz/redux-persist/issues/988#issuecomment-552242978 target=_blank rel="noopener noreferrer">Redux-Persist #988: non-serializable value error</a> for further discussion.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=use-with-react-redux-firebase>Use with React-Redux-Firebase<a href=#use-with-react-redux-firebase class=hash-link aria-label="Direct link to Use with React-Redux-Firebase" title="Direct link to Use with React-Redux-Firebase">​</a></h3>
<p>RRF includes timestamp values in most actions and state as of 3.x, but there are PRs that may improve that behavior as of 4.x.</p>
<p>A possible configuration to work with that behavior could look like:</p>
<div class="language-ts codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-ts codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> configureStore </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'@reduxjs/toolkit'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  getFirebase</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  actionTypes </span><span class="token keyword" style=color:#F92672>as</span><span class="token plain"> rrfActionTypes</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'react-redux-firebase'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> constants </span><span class="token keyword" style=color:#F92672>as</span><span class="token plain"> rfConstants </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'redux-firestore'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> rootReducer </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./rootReducer'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> store </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>configureStore</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  reducer</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> rootReducer</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token function-variable function" style=color:#E6D874>middleware</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">getDefaultMiddleware</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token function" style=color:#E6D874>getDefaultMiddleware</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      serializableCheck</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        ignoredActions</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token comment" style=color:#778090>// just ignore every redux-firebase and react-redux-firebase action type</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token operator" style=color:#F8F8F2>...</span><span class="token plain">Object</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token function" style=color:#E6D874>keys</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">rfConstants</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token plain">actionTypes</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token function" style=color:#E6D874>map</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">type</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token template-string template-punctuation string" style=color:#a6e22e>`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#F8F8F2>${</span><span class="token template-string interpolation">rfConstants</span><span class="token template-string interpolation punctuation" style=color:#F8F8F2>.</span><span class="token template-string interpolation">actionsPrefix</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#F8F8F2>}</span><span class="token template-string string" style=color:#a6e22e>/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#F8F8F2>${</span><span class="token template-string interpolation keyword" style=color:#F92672>type</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#F8F8F2>}</span><span class="token template-string template-punctuation string" style=color:#a6e22e>`</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token operator" style=color:#F8F8F2>...</span><span class="token plain">Object</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token function" style=color:#E6D874>keys</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">rrfActionTypes</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token function" style=color:#E6D874>map</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">type</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token template-string template-punctuation string" style=color:#a6e22e>`</span><span class="token template-string string" style=color:#a6e22e>@@reactReduxFirebase/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#F8F8F2>${</span><span class="token template-string interpolation keyword" style=color:#F92672>type</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#F8F8F2>}</span><span class="token template-string template-punctuation string" style=color:#a6e22e>`</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        ignoredPaths</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token string" style=color:#a6e22e>'firebase'</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'firestore'</span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      thunk</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        extraArgument</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          getFirebase</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>default</span><span class="token plain"> store</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class=col><a href=https://github.com/reduxjs/redux-toolkit/blob/master/docs/../docs/usage/usage-guide.md target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_bHB7 aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_ydrU"><span class=theme-last-updated>Last updated<!-- --> on <b><time datetime=2024-12-11T01:20:52.000Z itemprop=dateModified>Dec 11, 2024</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/usage/migrating-rtk-2><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>Migrating to RTK 2.0 and Redux 5.0</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/usage/usage-with-typescript><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>Usage With TypeScript</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_XG6w thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#store-setup class="table-of-contents__link toc-highlight">Store Setup</a><ul><li><a href=#manual-store-setup class="table-of-contents__link toc-highlight">Manual Store Setup</a><li><a href=#simplifying-store-setup-with-configurestore class="table-of-contents__link toc-highlight">Simplifying Store Setup with <code>configureStore</code></a></ul><li><a href=#writing-reducers class="table-of-contents__link toc-highlight">Writing Reducers</a><ul><li><a href=#simplifying-reducers-with-createreducer class="table-of-contents__link toc-highlight">Simplifying Reducers with <code>createReducer</code></a><li><a href=#considerations-for-using-createreducer class="table-of-contents__link toc-highlight">Considerations for Using <code>createReducer</code></a></ul><li><a href=#writing-action-creators class="table-of-contents__link toc-highlight">Writing Action Creators</a><ul><li><a href=#defining-action-creators-with-createaction class="table-of-contents__link toc-highlight">Defining Action Creators with <code>createAction</code></a><li><a href=#using-action-creators-as-action-types class="table-of-contents__link toc-highlight">Using Action Creators as Action Types</a></ul><li><a href=#creating-slices-of-state class="table-of-contents__link toc-highlight">Creating Slices of State</a><ul><li><a href=#defining-functions-in-objects class="table-of-contents__link toc-highlight">Defining Functions in Objects</a><li><a href=#simplifying-slices-with-createslice class="table-of-contents__link toc-highlight">Simplifying Slices with <code>createSlice</code></a><li><a href=#exporting-and-using-slices class="table-of-contents__link toc-highlight">Exporting and Using Slices</a></ul><li><a href=#asynchronous-logic-and-data-fetching class="table-of-contents__link toc-highlight">Asynchronous Logic and Data Fetching</a><ul><li><a href=#using-middleware-to-enable-async-logic class="table-of-contents__link toc-highlight">Using Middleware to Enable Async Logic</a><li><a href=#defining-async-logic-in-slices class="table-of-contents__link toc-highlight">Defining Async Logic in Slices</a><li><a href=#redux-data-fetching-patterns class="table-of-contents__link toc-highlight">Redux Data Fetching Patterns</a><li><a href=#async-requests-with-createasyncthunk class="table-of-contents__link toc-highlight">Async Requests with <code>createAsyncThunk</code></a></ul><li><a href=#managing-normalized-data class="table-of-contents__link toc-highlight">Managing Normalized Data</a><ul><li><a href=#normalizing-by-hand class="table-of-contents__link toc-highlight">Normalizing by hand</a><li><a href=#normalizing-with-normalizr class="table-of-contents__link toc-highlight">Normalizing with <code>normalizr</code></a><li><a href=#normalizing-with-createentityadapter class="table-of-contents__link toc-highlight">Normalizing with <code>createEntityAdapter</code></a><li><a href=#using-createentityadapter-with-normalization-libraries class="table-of-contents__link toc-highlight">Using <code>createEntityAdapter</code> with Normalization Libraries</a><li><a href=#using-selectors-with-createentityadapter class="table-of-contents__link toc-highlight">Using selectors with <code>createEntityAdapter</code></a><li><a href=#specifying-alternate-id-fields class="table-of-contents__link toc-highlight">Specifying Alternate ID Fields</a><li><a href=#sorting-entities class="table-of-contents__link toc-highlight">Sorting Entities</a></ul><li><a href=#working-with-non-serializable-data class="table-of-contents__link toc-highlight">Working with Non-Serializable Data</a><ul><li><a href=#use-with-redux-persist class="table-of-contents__link toc-highlight">Use with Redux-Persist</a><li><a href=#use-with-react-redux-firebase class="table-of-contents__link toc-highlight">Use with React-Redux-Firebase</a></ul></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class=footer__title>Docs</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/introduction/getting-started>Getting Started</a><li class=footer__item><a class=footer__link-item href=/tutorials/overview>Tutorials</a><li class=footer__item><a class=footer__link-item href=/usage/usage-guide>Usage Guide</a><li class=footer__item><a class=footer__link-item href=/api/configureStore>API Reference</a><li class=footer__item><a class=footer__link-item href=/rtk-query/overview>RTK Query</a></ul></div><div class="col footer__col"><div class=footer__title>Community</div><ul class="footer__items clean-list"><li class=footer__item><a href=http://stackoverflow.com/questions/tagged/redux target=_blank rel="noopener noreferrer" class=footer__link-item>Stack Overflow<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPrP><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://discord.gg/0ZcbPKXt5bZ6au5t target=_blank rel="noopener noreferrer" class=footer__link-item>Discord<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPrP><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a></ul></div><div class="col footer__col"><div class=footer__title>More</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://www.github.com/reduxjs/redux-toolkit target=_blank rel="noopener noreferrer" class=footer__link-item>GitHub<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPrP><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item>
                <a href=https://www.netlify.com>
                  <img src=https://www.netlify.com/img/global/badges/netlify-light.svg alt="Deploys by Netlify">
                </a>
              </ul></div></div><div class="footer__bottom text--center"><div class=margin-bottom--sm><img src=/img/redux_white.svg alt="Redux Logo" class="footer__logo themedComponent_siVc themedComponent--light_hHel"><img src=/img/redux_white.svg alt="Redux Logo" class="footer__logo themedComponent_siVc themedComponent--dark_yETr"></div><div class=footer__copyright>Copyright © 2015–2025 Dan Abramov and the Redux documentation authors.</div></div></div></footer></div>