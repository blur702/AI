services:
  page_password_protect.access_controller:
    class: Drupal\page_password_protect\Controller\PasswordAccessController
    arguments:
      - "@form_builder"
      - "@page_password_protect.password_protection"
      - "@entity_type.manager"
      - "@request_stack"
      - "@config.factory"

  page_password_protect.admin_form:
    class: Drupal\page_password_protect\Form\PasswordProtectionForm
    arguments:
      - "@page_password_protect.password_protection"
      - "@entity_type.manager"
      - "@config.factory"
      - "@messenger"
      - "@date.formatter"

  page_password_protect.access_form:
    class: Drupal\page_password_protect\Form\PasswordAccessForm
    arguments:
      - "@page_password_protect.password_protection"
      - "@config.factory"
      - "@messenger"
      - "@entity_type.manager"

  page_password_protect.password_protection:
    class: Drupal\page_password_protect\Service\PasswordProtectionService
    arguments:
      - "@database"
      - "@password"
      - "@request_stack"
      - "@session_manager"
      - "@current_user"
      - "@config.factory"
      - "@logger.channel.page_password_protect"

  logger.channel.page_password_protect:
    parent: logger.channel_base
    arguments: ["page_password_protect"]

  page_password_protect.redirect_subscriber:
    class: Drupal\page_password_protect\EventSubscriber\PasswordProtectRedirectSubscriber
    arguments:
      - "@page_password_protect.password_protection"
      - "@entity_type.manager"
      - "@current_route_match"
    tags:
      - { name: event_subscriber }
